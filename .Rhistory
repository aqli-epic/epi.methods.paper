knitr::opts_chunk$set(echo = TRUE)
# libraries
library(readr)
library(dplyr)
library(stringr)
library(magrittr)
library(ggplot2)
library(readr)
library(tidytext)
library(tidytext)
library(tidyr)
library(tidyverse)
library(sf)
library(tidytext)
library(tidyr)
library(tidyverse)
library(sf)
library(usethis)
library(devtools)
# reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "libGlobParameters" code chunk
mr_dataset_2019 <- read_csv("./data-raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> keep the following columns: age_id, age_name, cause_name, val
vIEW(mr_dataset_2019)
#> keep the following columns: age_id, age_name, cause_name, val
View(mr_dataset_2019)
#> keep the following columns: age_id, age_name, cause_name, val
mr_dataset_2019 %>%
select(age_id, age_name, cause_name, val) %>%
rename(cause = cause_name,
mortal_rate = val) %>%
View()
#> keep the following columns: age_id, age_name, cause_name, val
mr_dataset_2019 %>%
select(age_id, age_name, cause_name, val) %>%
rename(cause = cause_name,
mortal_rate = val) %>%
arrange(cause, age_id) %>%
View()
#> reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "libGlobParameters" code chunk
mr_dataset_2019 <- read_csv("./data-raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019 %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause_name, val) %>%
arrange(cause, age_id)
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019 %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause, mortal_rate) %>%
arrange(cause, age_id)
#> remove the word "years" from the age_name column
mr_dataset_2019 <- mr_dataset_2019 %>%
mutate(age_name = str_remove(age_name, "years"))
#> remove the word "years" from the age_name column
mr_dataset_2019 <- mr_dataset_2019 %>%
mutate(age_name = str_remove(age_name, "years"))
View(mr_dataset_2019)
#> reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "libGlobParameters" code chunk
mr_dataset_2019 <- read_csv("./data-raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019 %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause, mortal_rate) %>%
arrange(cause, age_id)
#> filter out certain rows based on conditions mentioned above
mr_dataset_2019 <- mr_dataset_2019 %>%
filter(age_name )
`%notin%` <- Negate(%in%)
`%notin%` <- Negate(`%in%`)
`%notin%` <- Negate(`%in%`)
mtcars
mtcars$mpg %in% 14.7
mtcars$mpg %in% 14.3
mtcars$mpg %notin% 14.3
#> reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "libGlobParameters" code chunk
mr_dataset_2019 <- read_csv("./data-raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019 %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause, mortal_rate) %>%
arrange(cause, age_id)
## drop age ids vector
drop_age_id_Vec <- c(21, 23, 24, 25, 26, 28, 159, 162, 169)
mr_dataset_2019 <- mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes") %>%  # keep only those age_ids that are not in the listed vector and drop rows where cause == "all causes"
View()
## drop age ids vector
drop_age_id_vec <- c(21, 23, 24, 25, 26, 28, 159, 162, 169)
r_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes") %>%  # keep only those age_ids that are not in the listed vector and drop rows where cause == "all causes"
View()
mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes") %>%  # keep only those age_ids that are not in the listed vector and drop rows where cause == "all causes"
View()
mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes") %>%
View()
mr_dataset_2019 <- mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes") %>%
View()
View(mr_dataset_2019)
#> reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "libGlobParameters" code chunk
mr_dataset_2019 <- read_csv("./data-raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019 %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause, mortal_rate) %>%
arrange(cause, age_id)
## drop age ids vector
drop_age_id_vec <- c(21, 23, 24, 25, 26, 28, 159, 162, 169)
View(mr_dataset_2019)
## drop age ids vector
drop_age_id_vec <- c(21, 23, 24, 25, 26, 28, 159, 162, 169)
mr_dataset_2019 <- mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes")
#> reading in the raw .csv file for mortality rates dataset from GBD for the year mentioned uptop in the "lib_glob_parameters" code chunk
mr_dataset_2019_raw <- read_csv("./data/raw/ihme_gbd_2019_mortality_rates_by_cause.csv")
#> rename "cause_name" and "val" columns, arrange by (cause, age_id) and keep the following columns: age_id, age_name, cause_name, val.
mr_dataset_2019 <- mr_dataset_2019_raw %>%
rename(cause = cause_name,
mortal_rate = val,
sex = sex_name) %>%
select(age_id, age_name, cause, mortal_rate) %>%
arrange(cause, age_id)
## drop age ids vector
drop_age_id_vec <- c(21, 22, 23, 24, 25, 26, 27, 159, 162, 169)
mr_dataset_2019 <- mr_dataset_2019 %>%
filter(age_id %notin% drop_age_id_vec,
cause %notin% "All causes")
mr_dataset_2019 <- mr_dataset_2019 %>%
mutate(age_name = str_replace(age_name, "<5 years", "0-5"),
age_name = str_replace(age_name,  "<1 year", "0-1"),
age_name = str_replace(age_name, "<20 years", "0-20"))
